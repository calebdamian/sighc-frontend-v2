<div class="row">
  <h1>Entradas</h1>
  <table class="table text-center">
    <thead>
      <tr>
        <th scope="col">Estado de salud</th>
        <th scope="col">Comentarios</th>
        <th scope="col">Diagnostico</th>
        <th scope="col">Fecha de creacion</th>
        <th scope="col">Prescripcion</th>
      </tr>
    </thead>
    <tbody *ngFor="let entry of entries">
      <tr>
        <td>{{ entry.healthStatus }}</td>
        <td>{{ entry.comments }}</td>
        <td>{{ entry.diagnosis }}</td>
        <td>{{ entry.createdDate | date : "dd/MM/yyyy" }}</td>
        <td>
          <button class="btn btn-secondary" (click)="getDrugs(entry.drugs)">
            Ver
          </button>
        </td>
      </tr>
    </tbody>
  </table>
  <h2>Medicamentos</h2>
  <table class="table text-center">
    <thead>
      <tr>
        <th scope="col">Nombre generico</th>
        <th scope="col">Nombre comercial</th>
        <th scope="col">Forma de tomar</th>
      </tr>
    </thead>
    <tbody *ngFor="let drug of drugs">
      <tr>
        <td>{{ drug.genericName }}</td>
        <td>{{ drug.brandName }}</td>
        <td>{{ drug.form }}</td>
      </tr>
    </tbody>
  </table>
  <h2>Crear entrada</h2>
  <div class="row">
    <div class="col">
      <form (submit)="submitEntry()">
        <div class="mb-3">
          <label for="exampleInputEmail1" class="form-label"
            >Estado de salud</label
          >
          <input
            type="number"
            name="name"
            class="form-control"
            placeholder="1-10"
            [(ngModel)]="entry.healthStatus"
            autofocus
          />
        </div>
        <div class="mb-3">
          <label for="exampleInputEmail1" class="form-label">Diagnostico</label>
          <input
            type="text"
            name="name"
            class="form-control"
            placeholder="Influenza"
            [(ngModel)]="entry.diagnosis"
            autofocus
          />
        </div>
        <div class="mb-3">
          <label for="exampleInputEmail1" class="form-label"
            >Observaciones</label
          >
          <input
            type="text"
            name="name"
            class="form-control"
            autofocus
            [(ngModel)]="entry.comments"
          />
        </div>

        <div class="d-flex justify-content-center mt-3">
          <button type="submit" class="btn btn-primary btn-block center">
            Guardar información
          </button>
        </div>
      </form>
    </div>
    <div class="col drug-list">
      <h3>Medicamentos disponibles</h3>
      <div *ngFor="let availableDrug of availableDrugs">
        <input
          class="form-check-input"
          type="checkbox"
          value=""
          (click)="addOrRemoveDrugs(availableDrug.id)"
        />

        <label class="form-check-label">{{ availableDrug.genericName }} </label>
      </div>
    </div>
  </div>
</div>
<div class="row">
  <h2>Evoluciones</h2>
  <table class="table text-center">
    <thead>
      <tr>
        <th scope="col">Fecha de inicio</th>
        <th scope="col">Fecha de fin</th>
        <th scope="col">Diagnostico</th>
        <th scope="col">Mejoria</th>
        <th scope="col">Medicacion recomendada</th>
      </tr>
    </thead>
    <tbody *ngFor="let evol of evolutions">
      <tr>
        <td>{{ evol.beginDate }}</td>
        <td>{{ evol.endDate }}</td>
        <td>{{ evol.diagnosis }}</td>
        <td>{{ evol.stringHealthStatus }}</td>
        <td>
          <button
            class="btn btn-secondary"
            (click)="getRecommDrugs(evol.recommendedDrugs)"
          >
            Ver
          </button>
        </td>
      </tr>
    </tbody>
  </table>
  <h2>Medicamentos recomendados</h2>
  <table class="table text-center">
    <thead>
      <tr>
        <th scope="col">Nombre generico</th>
        <th scope="col">Nombre comercial</th>
        <th scope="col">Forma de tomar</th>
      </tr>
    </thead>
    <tbody *ngFor="let drug of recommDrugs">
      <tr>
        <td>{{ drug.genericName }}</td>
        <td>{{ drug.brandName }}</td>
        <td>{{ drug.form }}</td>
      </tr>
    </tbody>
  </table>
  <h2>Crear evolucion</h2>
  <form (submit)="submitEvolution()">
    <div class="mb-3">
      <label for="exampleInputEmail1" class="form-label">Fecha de inicio</label>
      <input
        type="date"
        name="name"
        class="form-control"
        placeholder="1-10"
        [(ngModel)]="evol.beginDate"
        autofocus
      />
    </div>
    <div class="mb-3">
      <label for="exampleInputEmail1" class="form-label">Fecha de fin</label>
      <input
        type="date"
        name="name"
        class="form-control"
        placeholder="Influenza"
        [(ngModel)]="evol.endDate"
        autofocus
      />
    </div>
    <div class="mb-3">
      <label for="exampleInputEmail1" class="form-label">Diagnostico</label>
      <input
        type="text"
        name="name"
        class="form-control"
        autofocus
        [(ngModel)]="evol.diagnosis"
      />
    </div>

    <div class="d-flex justify-content-center mt-3">
      <button type="submit" class="btn btn-primary btn-block center">
        Guardar información
      </button>
    </div>
  </form>
</div>
